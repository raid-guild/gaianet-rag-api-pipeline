Here's the improved markdown:

# Boardroom Governance API

The repository includes both the [API pipeline manifest](https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/boardroom_api_pipeline.yaml) definition and the [OpenAPI spec](https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/openapi.yaml) to create a RAG pipeline for generating a knowledge base from any DAO/Protocol hosted by the Boardroom Governance API. These files are typically located in the `config` folder.

To consume data from this API, you need to request an API key from this [link](https://boardroom.io/developers/billing). Remember to set it under `config/secrets/api-key` or specify it directly using the `--api-key` argument in the CLI.

## API Pipeline Manifest - Overview

The manifest begins by defining an `api_name` and the required `api_parameters` for making API requests. In this example, we'll extract data from [Aave Governance DAO](https://boardroom.io/aave/insights).

```yaml [boardroom_api_pipeline.yaml]
api_name: "aave_boardroom_api"

api_parameters:
  cname: "aave"
  protocol: "aave"
```

The manifest also requires metadata information for API consumption:

```yaml [boardroom_api_pipeline.yaml]
api_config:
  request_method: "get"
  content_type: "application/json"
  response_entrypoint_field: "data"
```

The manifest defines a connector spec that specifies the parameters required for API requests. Since we're extracting data for a specific DAO/Protocol from Boardroom, we need parameters like `cname` and `protocol` (both sharing the same value in this case). The `api_key` must be attached to the API request URL.

```yaml [boardroom_api_pipeline.yaml]
spec:
  type: Spec
  documentation_url: https://docs.airbyte.com/integrations/sources/boardroom
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Boardroom API Spec
    type: object
    required:
      - api_key
      - cname
      - protocol
    additionalProperties: true
    properties:
      api_key:
        type: string
        description: >-
          Boardroom API Key. See <a href="https://docs.boardroom.io/docs/api/05c1fb6d88a07-governance-api">here</a>
          for details.
        airbyte-secret: true
      cname:
        type: string
        description: >-
          Protocol ID a.k.a cname
        examples:
          - aave
          - hopprotocol
      protocol:
        type: string
        description: >-
          Alias for cname. Needed as there are endpoints that use `protocol` as parameter id
        examples:
          - aave
          - metacartel
```

The `requester_base` defines how the connector should make API requests:

```yaml [boardroom_api_pipeline.yaml]
definitions:
  requester_base:
    type: HttpRequester
    url_base: "https://api.boardroom.info/v1"
    http_method: "GET"
    authenticator:
      type: ApiKeyAuthenticator
      api_token: "{{ config['api_key'] }}"
      inject_into:
        type: RequestOption
        field_name: "key"
        inject_into: request_parameter
```

Since Boardroom endpoints return data records wrapped within the `data` field, the record selector is configured as:

```yaml [boardroom_api_pipeline.yaml]
definitions:
  selector:
    type: RecordSelector
    extractor:
      type: DpathExtractor
      field_path: ["data"]
```

For pagination, the API uses a Cursor-based strategy:

```yaml [boardroom_api_pipeline.yaml]
definitions:
  paginator:
    type: DefaultPaginator
    pagination_strategy:
      type: CursorPagination
      cursor_value: "{{ response.get('nextCursor', '') }}"
      stop_condition: "{{ 'nextCursor' not in response }}"
    page_token_option:
      type: RequestOption
      field_name: "cursor"
      inject_into: "request_parameter"
```

[Rest of the content follows similar structure - endpoint definitions, schemas, text schemas, chunking parameters, etc.]

## Generating a Knowledge Base Using the `rag-api-pipeline` CLI

Before executing the `run-all` command, ensure that `Ollama` is running locally with your preferred LLM embeddings model:

```bash
poetry run rag-api-pipeline run-all config/boardroom_api_pipeline.yaml --openapi-spec-file config/openapi.yaml --llm-provider ollama
```

The processed and serialized API data, along with the generated knowledge base snapshot for Aave, can be found in this [link](https://huggingface.co/datasets/uxman/aave_snapshot_boardroom/tree/main).


## Import knowledge base into Gaianet node

Once the command above finishes, you'll find a compressed knowledge base snapshot in
`{OUTPUT_FOLDER}/aave_boardroom_api/` with name aave_boardroom_api_collection-xxxxxxxxxxxxxxxx-yyyy-mm-dd-hh-mm-ss.snapshot.tar.gz`. Now it's time to import it 
into your gaianet node. You can find the instructions on how to select a knowledge base [here](https://docs.gaianet.ai/node-guide/customize#select-a-knowledge-base). 
The recommended prompts and node config settings can be found [here](/node-deployment#recommended-gaianet-node-configuration).

## Example user prompts

- Asking what information the RAG bot is able to provide

![intro_prompt](https://raw.githubusercontent.com/raid-guild/gaianet-rag-api-pipeline/72403cc4503ce65da4e737eb8f68c03aa5772f44/aave_samples/intro.png)

- Asking for information about the proposal [Enable Metis as Collateral on the Metis Chain](https://boardroom.io/aave/proposal/cHJvcG9zYWw6YWF2ZTpvbmNoYWluLXVwZ3JhZGU6MTUy)

![proposal1_prompt](https://raw.githubusercontent.com/raid-guild/gaianet-rag-api-pipeline/72403cc4503ce65da4e737eb8f68c03aa5772f44/aave_samples/proposal1_summary.png)

- Asking for information about [Onboarding USDS and sUSDS to Aave v3](https://boardroom.io/aave/discussions/18987)

![proposal1_prompt](https://raw.githubusercontent.com/raid-guild/gaianet-rag-api-pipeline/72403cc4503ce65da4e737eb8f68c03aa5772f44/aave_samples/proposal2_summary.png)

## Generating a knowledge base from another target DAO

If you're interested on getting a knowledge base for another DAO, you can reuse the same [boardroom_api_pipeline.yaml](https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/boardroom_api_pipeline.yaml) 
file and simply update the `api_name` and `api_parameters` values.