import{u as a,j as e}from"./index-7KzzTMju.js";const l={title:"Optimism Agora API",description:"undefined"};function n(i){const s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",span:"span",...a(),...i.components};return e.jsxs(e.Fragment,{children:[e.jsx(s.header,{children:e.jsxs(s.h1,{id:"optimism-agora-api",children:["Optimism Agora API",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#optimism-agora-api",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsxs(s.p,{children:["This repository contains the ",e.jsx(s.a,{href:"https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/agora_api_pipeline.yaml",children:"API pipeline manifest"})," and ",e.jsx(s.a,{href:"https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/agora_openapi.yaml",children:"OpenAPI specification"})," needed to create a RAG pipeline. This pipeline generates a knowledge base from RetroPGF projects and proposals within the OP collective. These files are typically located in the ",e.jsx(s.code,{children:"config"})," folder."]}),`
`,e.jsxs(s.p,{children:["To access this API, you'll need an API key. You can request one through ",e.jsx(s.a,{href:"https://www.agora.xyz/#Product",children:"Agora's Discord server"}),". Once obtained, store the key in ",e.jsx(s.code,{children:"config/secrets/api-key"})," or provide it directly using the ",e.jsx(s.code,{children:"--api-key"})," CLI argument."]}),`
`,e.jsxs(s.h2,{id:"api-pipeline-manifest---overview",children:["API Pipeline Manifest - Overview",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#api-pipeline-manifest---overview",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["The API pipeline extracts data from the ",e.jsx(s.code,{children:"/proposals"})," and ",e.jsx(s.code,{children:"/projects"})," ",e.jsx(s.a,{href:"https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/agora_api_pipeline.yaml#L79",children:"endpoints"}),". Since no ",e.jsx(s.code,{children:"api_parameters"})," are required, this section remains ",e.jsx(s.a,{href:"https://github.com/raid-guild/gaianet-rag-api-pipeline/blob/main/config/agora_api_pipeline.yaml#L5",children:"empty"}),"."]}),`
`,e.jsxs(s.p,{children:["Below is the requester definition. The API implements a BearerAuthenticator schema and retrieves the ",e.jsx(s.code,{children:"api_token"})," from the ",e.jsx(s.code,{children:"config"})," object:"]}),`
`,e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"# agora_api_pipeline.yaml"})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"definition"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"  requester_base"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"HttpRequester"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    url_base"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"https://vote.optimism.io/api/v1"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    http_method"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"GET"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    authenticator"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"# Details at https://docs.airbyte.com/connector-development/config-based/understanding-the-yaml-file/authentication"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"BearerAuthenticator"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      api_token"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:`"{{ config['api_key'] }}"`})]})]})}),`
`,e.jsxs(s.p,{children:["The API uses an Offset-based pagination strategy. The ",e.jsx(s.code,{children:"page_size"})," is set to 50, while ",e.jsx(s.code,{children:"offset"})," and ",e.jsx(s.code,{children:"limit"})," parameters are dynamically inserted into the URL as request parameters:"]}),`
`,e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"# agora_api_pipeline.yaml"})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"definition"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"  paginator"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"# Details at https://docs.airbyte.com/connector-development/config-based/understanding-the-yaml-file/pagination"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"DefaultPaginator"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    pagination_strategy"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"# Details at https://docs.airbyte.com/connector-development/config-based/understanding-the-yaml-file/pagination#offset-increment"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"OffsetIncrement"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      page_size"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"50"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    page_token_option"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"RequestOption"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      field_name"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"offset"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      inject_into"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"request_parameter"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"    page_size_option"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"RequestOption"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      inject_into"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"request_parameter"'})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      field_name"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"limit"'})]})]})}),`
`,e.jsxs(s.h2,{id:"generating-a-knowledge-base-using-the-rag-api-pipeline-cli",children:["Generating a Knowledge Base Using the ",e.jsx(s.code,{children:"rag-api-pipeline"})," CLI",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#generating-a-knowledge-base-using-the-rag-api-pipeline-cli",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Before running the ",e.jsx(s.code,{children:"run-all"})," command, ensure that ",e.jsx(s.code,{children:"Ollama"})," is running locally with your preferred LLM embeddings model:"]}),`
`,e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"poetry"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" run"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" rag-api-pipeline"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" run-all"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" config/agora_api_pipeline.yaml"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --openapi-spec-file"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" config/agora_openapi.yaml"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --llm-provider"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ollama"})]})})}),`
`,e.jsxs(s.p,{children:["After execution, you'll find a compressed knowledge base snapshot in ",e.jsx(s.code,{children:"{OUTPUT_FOLDER}/optimism_agora_api/"})," named ",e.jsx(s.code,{children:"optimism_agora_api_collection-xxxxxxxxxxxxxxxx-yyyy-mm-dd-hh-mm-ss.snapshot.tar.gz"}),". For instructions on importing this into your Gaianet node, refer to the documentation on ",e.jsx(s.a,{href:"https://docs.gaianet.ai/node-guide/customize#select-a-knowledge-base",children:"selecting a knowledge base"}),". Find recommended prompts and node configuration settings ",e.jsx(s.a,{href:"/node-deployment#recommended-gaianet-node-configuration",children:"here"}),"."]})]})}function o(i={}){const{wrapper:s}={...a(),...i.components};return s?e.jsx(s,{...i,children:e.jsx(n,{...i})}):n(i)}export{o as default,l as frontmatter};
